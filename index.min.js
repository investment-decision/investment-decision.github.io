async function a(){try{let A=await fetch('./data/market_indices.json');if(!A.ok)throw Error('Network response was not ok');let b=await A.json();if(b.length>0){let C=b[b.length-1][0];document.getElementById('last-updated').textContent=`Last updated: ${C}`}let c=b.map(d=>d[0]),_={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(_a){let _b=this.getLabelForValue(_a);if(_b?.endsWith('-01'))return _b.substring(0,7);return null}},grid:{display:!1}},y:{grid:{color:'#f0f0f0'}}},elements:{point:{radius:0,hoverRadius:4}}},e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{min:-1.5,max:1.5,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}},y:{min:-1.5,max:1.5,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}}}},f={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(){if(label?.endsWith('-01'))return label.substring(0,7);return null}},grid:{display:!1}},y:{min:0,max:100,grid:{color:'#f0f0f0'},ticks:{stepSize:20}}},elements:{point:{radius:0,hoverRadius:4}}},g=60,h=b.slice(-g),B=h.map(d=>({x:d[1],y:d[2]})),j=B.slice(0,-1).map((_,i,_c)=>{let D=0.1+(0.9*(i/_c.length));return`rgba(100, 110, 120, ${D})`}),k=h[0][0],l=h[h.length-2][0],m={id:'quadrantLabels',afterDraw:({ctx:_A,chartArea:{left:_B,right:_C,top:_d,bottom:E,},scales:{x,y,},})=>{let H=x.getPixelForValue(0),I=y.getPixelForValue(0);_A.save();_A.font='bold 12px Inter';_A.fillStyle='rgba(150, 150, 150, 0.4)';_A.textAlign='center';_A.textBaseline='middle';_A.fillText('OVERHEAT',(H+_C)/2,(_d+I)/2);_A.fillText('STAGFLATION',(_B+H)/2,(_d+I)/2);_A.fillText('DEFLATION',(_B+H)/2,(I+E)/2);_A.fillText('REFLATION',(H+_C)/2,(I+E)/2);_A.restore()}};new Chart(document.getElementById('chartMacro'), {type:'scatter',data:{datasets:[{label:`${k} ~ ${l}`,data:B.slice(0,-1),backgroundColor:j,borderColor:j,pointRadius:3,pointHoverRadius:5},{label:'Current',data:[B[B.length-1]],backgroundColor:'#e74c3c',borderColor:'#ffffff',borderWidth:2,pointRadius:7,pointHoverRadius:9}]},options:e,plugins:[m]});new Chart(document.getElementById('chartLiquidity'), {type:'line',data:{labels:c,datasets:[{data:b.map(d=>d[3]),borderColor:'#af52de',borderWidth:2,fill:!1,tension:0.3}]},options:_});new Chart(document.getElementById('chartSentiment'), {type:'line',data:{labels:c,datasets:[{data:b.map(d=>d[4]),borderColor:'#ff9500',borderWidth:2,fill:!1,tension:0.3},{data:Array(c.length).fill(80),borderColor:'rgba(231, 76, 60, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1},{data:Array(c.length).fill(20),borderColor:'rgba(46, 204, 113, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1}]},options:f});new Chart(document.getElementById('chartLeading'), {type:'line',data:{labels:c,datasets:[{data:b.map(d=>d[5]),borderColor:'#34c759',borderWidth:2,fill:!1,tension:0.3}]},options:_});let n=(aA,aB,aC,_D=_)=>new Chart(document.getElementById(aA), {type:'line',data:{labels:c,datasets:[{data:b.map(d=>d[aB]),borderColor:aC,borderWidth:1.5,fill:!1,tension:0.1}]},options:_D});n('chartPmi',6,'#007aff');n('chartRatio',7,'#007aff');n('chartT5yifr',8,'#ff3b30');n('chartCommodity',9,'#ff3b30');n('chartSentMom',11,'#ff9500',f);n('chartSentVix',12,'#ff9500',f);n('chartSentSafe',14,'#ff9500',f);n('chartSentJunk',15,'#ff9500',f);n('chartLeadCG',16,'#34c759');n('chartLeadBV',17,'#34c759');n('chartLeadYS',18,'#34c759')}catch(aD){}}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',a):a();
