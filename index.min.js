let A=a=>!Number.isNaN(a)&&isNumber(a);async function b(){try{let _=await fetch('./data/market_indices.json');if(!_.ok)throw Error('Network response was not ok');let B=await _.json();if(B.length>0){let C=B[B.length-1][0];document.getElementById('last-updated').textContent=`Last updated: ${C}`}let c=B.map(d=>d[0]),D={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(_a){let _b=this.getLabelForValue(_a);if(_b?.endsWith('-01'))return _b.substring(0,7);return null}},grid:{display:!1}},y:{grid:{color:'#f0f0f0'}}},elements:{point:{radius:0,hoverRadius:4}}},e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:_A=>{let _B=_A?.[0]?.raw;return _B?.date??''},label:E=>{const{x,y}=E.raw||{},_d=A(x)?x.toFixed(2):x,_e=(typeof y==='number')?y.toFixed(2):y;return`Growth: ${_d}, Inflation: ${_e}`}}}},scales:{x:{min:-3,max:3,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}},y:{min:-3,max:3,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}}}},f={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(aA){let aB=this.getLabelForValue(aA);if(aB?.endsWith('-01'))return aB.substring(0,7);return null}},grid:{display:!1}},y:{min:0,max:100,grid:{color:'#f0f0f0'},ticks:{stepSize:20}}},elements:{point:{radius:0,hoverRadius:4}}},g=60,h=B.slice(-g),I=h.map(d=>({x:d[1],y:d[2],date:d[0]})),j=I.slice(0,-1).map((_,i,_c)=>{let _D=0.1+(0.9*(i/_c.length));return`rgba(100, 110, 120, ${_D})`}),k=h[0][0],l=h[h.length-2][0],m={id:'quadrantLabels',afterDraw:({ctx:aC,chartArea:{left:aD,right:_C,top:aE,bottom:_E,},scales:{x,y,},})=>{let H=x.getPixelForValue(0),_i=y.getPixelForValue(0);aC.save();aC.font='bold 12px Inter';aC.fillStyle='rgba(150, 150, 150, 0.4)';aC.textAlign='center';aC.textBaseline='middle';aC.fillText('OVERHEAT',(H+_C)/2,(aE+_i)/2);aC.fillText('STAGFLATION',(aD+H)/2,(aE+_i)/2);aC.fillText('DEFLATION',(aD+H)/2,(_i+_E)/2);aC.fillText('REFLATION',(H+_C)/2,(_i+_E)/2);aC.restore()}};new Chart(document.getElementById('chartMacro'), {type:'scatter',data:{datasets:[{label:`${k} ~ ${l}`,data:I.slice(0,-1),backgroundColor:j,borderColor:j,pointRadius:3,pointHoverRadius:5},{label:'Current',data:[I[I.length-1]],backgroundColor:'#e74c3c',borderColor:'#ffffff',borderWidth:2,pointRadius:7,pointHoverRadius:9}]},options:e,plugins:[m]});new Chart(document.getElementById('chartLiquidity'), {type:'line',data:{labels:c,datasets:[{data:B.map(d=>d[3]),borderColor:'#af52de',borderWidth:2,fill:!1,tension:0.3}]},options:D});new Chart(document.getElementById('chartSentiment'), {type:'line',data:{labels:c,datasets:[{data:B.map(d=>d[4]),borderColor:'#ff9500',borderWidth:2,fill:!1,tension:0.3},{data:Array(c.length).fill(80),borderColor:'rgba(231, 76, 60, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1},{data:Array(c.length).fill(20),borderColor:'rgba(46, 204, 113, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1}]},options:f});new Chart(document.getElementById('chartLeading'), {type:'line',data:{labels:c,datasets:[{data:B.map(d=>d[5]),borderColor:'#34c759',borderWidth:2,fill:!1,tension:0.3}]},options:D});let n=(aF,aG,aH,aI=D)=>new Chart(document.getElementById(aF), {type:'line',data:{labels:c,datasets:[{data:B.map(d=>d[aG]),borderColor:aH,borderWidth:1.5,fill:!1,tension:0.1}]},options:aI});n('chartPmi',6,'#007aff');n('chartRatio',7,'#007aff');n('chartT5yifr',8,'#ff3b30');n('chartCommodity',9,'#ff3b30');n('chartSentMom',11,'#ff9500',f);n('chartSentVix',12,'#ff9500',f);n('chartSentSafe',14,'#ff9500',f);n('chartSentJunk',15,'#ff9500',f);n('chartLeadCG',16,'#34c759');n('chartLeadBV',17,'#34c759');n('chartLeadYS',18,'#34c759')}catch(aJ){}}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',b):b();
