let a={macro:{title:'Macro Regime Composite',body:`
                    <p>Visualizes the four economic seasons based on Growth and Inflation. The current regime is determined by the dot's position.</p>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; font-size:0.9em; text-align:center;">
                        <div style="background:#ffebee; padding:10px; border-radius:6px; border:1px solid #ffcdd2;">
                            <strong style="color:#c62828;">Stagflation (Q2)</strong><br>
                            <span style="font-size:0.8em; color:#666;">Growth↓ Inflation↑</span><br>
                            <span style="color:#d32f2f; font-weight:600;">Cash/Gold</span>
                        </div>
                        <div style="background:#fff3e0; padding:10px; border-radius:6px; border:1px solid #ffe0b2;">
                            <strong style="color:#e65100;">Overheat (Q1)</strong><br>
                            <span style="font-size:0.8em; color:#666;">Growth↑ Inflation↑</span><br>
                            <span style="color:#ef6c00; font-weight:600;">Commodities/Value</span>
                        </div>
                        <div style="background:#e3f2fd; padding:10px; border-radius:6px; border:1px solid #bbdefb;">
                            <strong style="color:#1565c0;">Deflation (Q3)</strong><br>
                            <span style="font-size:0.8em; color:#666;">Growth↓ Inflation↓</span><br>
                            <span style="color:#1976d2; font-weight:600;">Bonds/USD</span>
                        </div>
                        <div style="background:#e8f5e9; padding:10px; border-radius:6px; border:1px solid #c8e6c9;">
                            <strong style="color:#2e7d32;">Reflation (Q4)</strong><br>
                            <span style="font-size:0.8em; color:#666;">Growth↑ Inflation↓</span><br>
                            <span style="color:#388e3c; font-weight:600;">Growth Stocks</span>
                        </div>
                    </div>`},liquidity:{title:'Global Net Liquidity Gauge',body:`
                    <p>Measures the net liquidity available in the market by subtracting liabilities (TGA, RRP) from the Fed's total assets.</p>
                    <p><strong>Formula:</strong> Fed Assets - TGA - RRP</p>
                    <ul>
                        <li><strong>Rising:</strong> Increased liquidity, favoring risk assets (stocks, crypto).</li>
                        <li><strong>Falling:</strong> Tightening liquidity, potential for market correction.</li>
                    </ul>`},sentiment:{title:'Composite Sentiment Oscillator',body:`<p>Measures market fear and greed on a scale of 0 to 100.</p>
                       <ul>
                           <li><strong>0-20 (Extreme Fear):</strong> Market panic. Potential contrarian buy signal.</li>
                           <li><strong>80-100 (Extreme Greed):</strong> Market euphoria. Consider taking profits.</li>
                           <li><strong>Components:</strong> VIX, Put/Call Ratio, Junk Bond Spread, Momentum, Safe Haven Demand.</li>
                       </ul>`},leading:{title:'Inter-Market Leading Indicator',body:`<p>Predicts future market direction using "smart money" signals from bond and commodity markets.</p>
                       <ul>
                           <li><strong>Copper/Gold Ratio:</strong> Economic recovery vs. fear.</li>
                           <li><strong>Yield Curve (10Y-2Y):</strong> Recession warning when inverted.</li>
                           <li><strong>High Beta/Low Vol:</strong> Internal market risk appetite.</li>
                       </ul>`},pmi:{title:'Z_PMI (ISM Manufacturing)',body:`<p>A leading indicator of economic health based on surveys of purchasing managers. 'New Orders' specifically leads the equity market cycle.</p>`},ratio:{title:'Z_Ratio (Cyclical vs Defensive)',body:`<p>The relative performance of Cyclical vs. Defensive stocks. Reflects real-time economic growth expectations from market participants.</p>`},t5yifr:{title:'Z_T5YIFR (5Y Inflation Exp)',body:`<p>The market's expectation for inflation over the 5-year period beginning 5 years from today. Filters out short-term oil price noise.</p>`},commodity:{title:'Z_Commodity (Broad Index)',body:`<p>Broad commodity index (Energy, Metals, Agriculture). A leading indicator for consumer price inflation (CPI).</p>`},mom:{title:'Momentum Score',body:'<p>Distance between current price and the 125-day moving average. Higher values indicate Greed.</p>'},vix:{title:'VIX Score',body:'<p>Volatility Index. Higher values indicate Fear (resulting in a lower score).</p>'},pc:{title:'Put/Call Score',body:'<p>Put/Call Ratio. Higher values indicate Fear (resulting in a lower score).</p>'},safe:{title:'Safe Haven Score',body:'<p>Return difference between Stocks and Bonds. Outperformance of stocks indicates Greed.</p>'},junk:{title:'Junk Bond Score',body:'<p>High Yield Bond Spread. Widening spreads indicate Fear (resulting in a lower score).</p>'},cg:{title:'Z_Copper/Gold',body:'<p>Copper (Growth) to Gold (Fear) ratio. Rising trend signals economic recovery.</p>'},bv:{title:'Z_Beta/Volatility',body:'<p>Ratio of High Beta to Low Volatility stocks. Indicates internal market risk appetite.</p>'},ys:{title:'Z_Yield Spread',body:'<p>Yield Curve Spread (10Y-2Y). Inversion (negative value) warns of an impending recession.</p>'}};async function b(){try{let A=await fetch('./data/market_indices.json');if(!A.ok)throw Error('Network response was not ok');let _=await A.json();let c=_.map(d=>d[0]),B={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(C){let _b=this.getLabelForValue(C);return _b.substring(0,7)}},grid:{display:!1}},y:{grid:{color:'#f0f0f0'}}},elements:{point:{radius:0,hoverRadius:4}}},e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{min:-3,max:3,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}},y:{min:-3,max:3,grid:{color:ctx=>ctx.tick.value===0?'#333':'#eee',lineWidth:ctx=>ctx.tick.value===0?1.5:1}}}},f={responsive:!0,maintainAspectRatio:!1,interaction:{mode:'index',intersect:!1},plugins:{legend:{display:!1}},scales:{x:{display:!0,ticks:{maxTicksLimit:6,font:{size:10},callback:function(_a){let D=this.getLabelForValue(_a);return D.substring(0,7)}},grid:{display:!1}},y:{min:0,max:100,grid:{color:'#f0f0f0'},ticks:{stepSize:20}}},elements:{point:{radius:0,hoverRadius:4}}},g=60,h=_.slice(-g),I=h.map(d=>({x:d[1],y:d[2]})),j=I.slice(0,-1).map((_,i,_c)=>{let _d=0.1+(0.9*(i/_c.length));return`rgba(100, 110, 120, ${_d})`}),k=h[0][0],l=h[h.length-2][0],m={id:'quadrantLabels',afterDraw:({ctx:_A,chartArea:{left:_B,right:_C,top:_D,bottom:E,},scales:{x,y,},})=>{let H=x.getPixelForValue(0),_i=y.getPixelForValue(0);_A.save();_A.font='bold 12px Inter';_A.fillStyle='rgba(150, 150, 150, 0.4)';_A.textAlign='center';_A.textBaseline='middle';_A.fillText('OVERHEAT',(H+_C)/2,(_D+_i)/2);_A.fillText('STAGFLATION',(_B+H)/2,(_D+_i)/2);_A.fillText('DEFLATION',(_B+H)/2,(_i+E)/2);_A.fillText('REFLATION',(H+_C)/2,(_i+E)/2);_A.restore()}};new Chart(document.getElementById('chartMacro'), {type:'scatter',data:{datasets:[{label:`${k} ~ ${l}`,data:I.slice(0,-1),backgroundColor:j,borderColor:j,pointRadius:3,pointHoverRadius:5},{label:'Current',data:[I[I.length-1]],backgroundColor:'#e74c3c',borderColor:'#ffffff',borderWidth:2,pointRadius:7,pointHoverRadius:9}]},options:e,plugins:[m]});new Chart(document.getElementById('chartLiquidity'), {type:'line',data:{labels:c,datasets:[{data:_.map(d=>d[3]),borderColor:'#af52de',borderWidth:2,fill:!1,tension:0.3}]},options:B});new Chart(document.getElementById('chartSentiment'), {type:'line',data:{labels:c,datasets:[{data:_.map(d=>d[4]),borderColor:'#ff9500',borderWidth:2,fill:!1,tension:0.3},{data:Array(c.length).fill(80),borderColor:'rgba(231, 76, 60, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1},{data:Array(c.length).fill(20),borderColor:'rgba(46, 204, 113, 0.3)',borderWidth:1,borderDash:[5,5],pointRadius:0,fill:!1}]},options:f});new Chart(document.getElementById('chartLeading'), {type:'line',data:{labels:c,datasets:[{data:_.map(d=>d[5]),borderColor:'#34c759',borderWidth:2,fill:!1,tension:0.3}]},options:B});let n=(aA,aB,aC,aD=B)=>new Chart(document.getElementById(aA), {type:'line',data:{labels:c,datasets:[{data:_.map(d=>d[aB]),borderColor:aC,borderWidth:1.5,fill:!1,tension:0.1}]},options:aD});n('chartPmi',6,'#007aff');n('chartRatio',7,'#007aff');n('chartT5yifr',8,'#ff3b30');n('chartCommodity',9,'#ff3b30');n('chartSentMom',11,'#ff9500',f);n('chartSentVix',12,'#ff9500',f);n('chartSentSafe',14,'#ff9500',f);n('chartSentJunk',15,'#ff9500',f);n('chartLeadCG',16,'#34c759');n('chartLeadBV',17,'#34c759');n('chartLeadYS',18,'#34c759')}catch(aE){}}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',b):b();
